<html>
	<head>
		<title>RSSSSSSS</title>
		<script type="text/javascript" src="https://www.google.com/jsapi"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
	</head>
	
	<body>
		<div id="list" style="width:48%;float:left;border-style:solid;border-width:5px;" class="container-fluid">
			<h1>List!</h1>
			<button id="food" class="btn btn-default">Food!</button>
			<button id="business" class="btn btn-default">Business!</button>
		</div>
		<div id="detail" style="width:48%;float:right;border-style:solid;border-width:5px;" class="container-fluid">
			<h1>Details!</h1>
		</div>
		<script type="text/javascript">

			function details(obj){
					console.log(obj);
		
			//		console.log("i details");	
			//		console.log(obj.getAttribute("val"));	
					document.getElementById("detail").innerHTML = "";
					var mediaEntries = obj.xmlNode.getElementsByTagNameNS('*','thumbnail');
					for (var j = 0; j < mediaEntries.length; j++) {
						var mediaEntry = mediaEntries[j];
						var mediaThumbnailUrl = mediaEntry.attributes.getNamedItem('url').value
						//console.log(mediaThumbnailUrl);
					}
					//console.log(mediaThumbnailUrl);		
					var div = document.createElement('div');
					var title = document.createTextNode(obj.title);
					var image = document.createElement('img');
					image.src=mediaThumbnailUrl;
					div.appendChild(title);
					div.appendChild(image);
					document.getElementById("detail").appendChild(div);
			}
			
			//Skriv en function som ritar skiten
			
			google.load("feeds", "1");
			function initialize() {
				var choice = food;
				$( "#food" ).click(function() {
  					choice = 'food';
				});
				var feed = new google.feeds.Feed('http://www.rendip.com/c/'+choice+'/rss');
				feed.setResultFormat(google.feeds.Feed.MIXED_FORMAT);
				feed.setNumEntries(10);
				feed.load(function(result) {
					if (!result.error) {
						for (var i = 0; i < result.feed.entries.length; i++) {
							var entry = result.feed.entries[i];
							var mediaEntries = entry.xmlNode.getElementsByTagNameNS('*','thumbnail');
								for (var j = 0; j < mediaEntries.length; j++) {
									var mediaEntry = mediaEntries[j];
									var mediaThumbnailUrl = mediaEntry.attributes.getNamedItem('url').value
									//console.log(mediaThumbnailUrl);
								}
							}	
						//own stuff
						for(j=0;j<result.feed.entries.length;j++){
							var para = document.createElement('p');
							var text = document.createTextNode(result.feed.entries[j].title);
							
							//console.log(result.feed.entries[j]);
							
							var a = document.createElement('button');
							a.setAttribute("class", 'btn btn-link');
							a.setAttribute("style", 'width:100%');
							a.appendChild(text);
							console.log(j);
							//a.href=result.feed.entries[j].link;
							var obj = result.feed.entries[j];
							console.log(obj);
							a.onclick = (function(obj){
								return function(){
									details(obj);
								};
							})(obj);
							
							/*var button = document.createElement('button');
							var text = document.createTextNode(result.feed.entries[j].title);
							button.appendChild*/
							
							para.appendChild(a);
							document.getElementById("list").appendChild(para);
				

						}
					console.log(result.feed.entries);
					}
				});
		}
		google.setOnLoadCallback(initialize);
		</script> 
		
		<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
	</body>
</html>
