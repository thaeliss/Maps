<!DOCTYPE html>
<html>
	<head>
		<style type="text/css">
		  html, body, #map-canvas { height: 100%; margin: 0; padding: 0;}
		</style>
		<title>Playing With Maps!</title>
		<meta http-equiv="Cache-control" content="no-cache">  <!-- public, private, no-cache, no-store -->
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="mobile-web-app-status-bar-style" content="white">
		<link rel="stylesheet" href="css/bootstrap.css" type="text/css" />
		
	</head>	
	<body>
		
		<div id='controls' style='padding:10px;background-color:grey'>
			<button id='zoom-in'>Zoom in</button>
			<button id='zoom-out'>Zoom out</button>
			<button id='home'>Take me home tonight</button>
			<button id='marker'>Mark your territory</button>
		</div>
		<div id="map-canvas"></div>
		
		<script type="text/javascript"
		  src="https://maps.googleapis.com/maps/api/js?sensor=true">
		</script>
		
		<script type="text/javascript">		
			var homePlace;
			var map;
			var zoomLevel = 15;
			
		  	function initialize() {
		  		getLocation();
		  		var mapDiv = document.getElementById('map-canvas');
				var mapOptions = {
			  		zoom: zoomLevel,
			  		mapTypeId: google.maps.MapTypeId.SATELLITE,
			  		disableDefaultUI: true,
				};
				map = new google.maps.Map(mapDiv, mapOptions);
							
				map.setTilt(45);
				map.setHeading(0);		
			}
			
			google.maps.event.addDomListener(window, 'load', initialize);
			
			var home = document.getElementById('home');
			var zoom_in = document.getElementById('zoom-in');
			var zoom_out = document.getElementById('zoom-out');
			var marker = document.getElementById('marker');
			
			
					
			google.maps.event.addDomListener(home, 'click', function() {
				map.setCenter(homePlace)
			});
			google.maps.event.addDomListener(zoom_in, 'click', function() {
				map.setZoom(zoomLevel++)
			});
			google.maps.event.addDomListener(zoom_out, 'click', function() {
				map.setZoom(zoomLevel--)
			});
			google.maps.event.addDomListener(marker, 'click', function() {
				var place = map.getCenter();
				var marker = new google.maps.Marker({
				draggable:true,
				animation: google.maps.Animation.DROP,
				position: place,
				map: map,
				title:"Hello World!"
				})
			});
		

			function getLocation() {
			    if (navigator.geolocation) {
			        navigator.geolocation.getCurrentPosition(setPosition);		//setPosition = callback function with a Position object as its only input parameter	        
			    } else { 
			         console.log("Error with Geolocation!");
			    }
			}

			//set homePlace and centers map on current location
			function setPosition(position) {
				homePlace = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
				map.setCenter(homePlace);	
			}			
		</script>
	</body>
</html>
